spring:
  web:
    error:
      include-message: always
      include-binding-errors: always

  jackson:
    deserialization:
      fail-on-unknown-properties: true

  # File Upload Configuration for webmvc
  servlet:
    multipart:
      enabled: true
      max-file-size: 50MB
      max-request-size: 200MB
      file-size-threshold: 0B
      resolve-lazily: false

  # Database Configuration
  datasource:
    url: ${DB_URL:jdbc:postgresql://aws-1-ap-south-1.pooler.supabase.com:6543/postgres?ssl=true&sslmode=require&preferQueryMode=simple}
    username: ${DB_USERNAME:postgres.rbyiitbryebpptdgttwh}
    password: ${DB_PASSWORD:daYIjIgJ4NNAy4S1}
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 3
      minimum-idle: 1
      idle-timeout: 60000
      max-lifetime: 300000
      connection-test-query: SELECT 1
      validation-timeout: 3000
      leak-detection-threshold: 60000
      auto-commit: true

  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          batch_size: 10
        order_inserts: true
        order_updates: true
        connection.provider_disables_autocommit: false
        jdbc.lob.non_contextual_creation: true
        generate_statistics: false
        cache.use_second_level_cache: false
        cache.use_query_cache: false
        query.plan_cache_max_size: 64
        query.plan_parameter_metadata_max_size: 64

  mail:
    host: smtp.gmail.com
    port: 587
    username: ${MAIL_USERNAME:annoa16307@gmail.com}
    password: ${MAIL_PASSWORD:pekzktlmsgzsibtp}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000
        transport:
          protocol: smtp

app:
  jwt:
    secret: ${JWT_SECRET:HGl4x4g8lsDeSEfpuQ9MSCHj+L7N1QHu/ElpT5Ed/Uk=}
    expiration: 86400000
  admin:
    secret-key: ${ADMIN_SECRET_KEY:SuperSecretAdminKey@2024!}
  cors:
    allowed-origins: http://localhost:3000,http://localhost:5173
  payment:
    khalti:
      secret-key: ${KHALTI_SECRET_KEY:live_secret_key_68791341fdd94846a146f0457ff7b455}
      api-url: https://dev.khalti.com/api/v2/epayment
    esewa:
      secret-key: ${ESEWA_SECRET_KEY:8gBm/:&EnhH.1/q}
      product-code: ${ESEWA_PRODUCT_CODE:EPAYTEST}
      form-url: https://rc-epay.esewa.com.np/api/epay/main/v2/form
  base-url: ${APP_BASE_URL:http://localhost:8080}
  frontend-url: ${APP_FRONTEND_URL:http://localhost:5173}

# Server configuration
server:
  port: 8080
  tomcat:
    max-http-form-post-size: 200MB
    max-swallow-size: 200MB
    max-parameter-count: 10000
    max-part-count: 20

# Logging configuration
logging:
  level:
    org.springframework.transaction: DEBUG
    org.springframework.jdbc: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.hibernate.engine.transaction.internal.TransactionImpl: DEBUG
    com.zaxxer.hikari: DEBUG
    com.rabin.backend: DEBUG
    # Enable Tomcat multipart debugging
    org.apache.tomcat.util.http.fileupload: DEBUG
    org.apache.catalina.connector: DEBUG
    org.apache.catalina.core: DEBUG